import{$ as R,A as ee,B as te,C as ie,D as W,E as c,F as A,H as x,I as w,J as M,L as H,M as L,N as T,O as ne,P as oe,Q as re,R as se,S as ae,T as le,U as ce,V as de,W as O,Y as z,a as Z,aa as D,b as G,ba as j,c as k,ca as N,d as Y,e as J,f as _,fa as q,g as I,h as U,i as v,ia as pe,j as y,ja as ue,k as B,m as p,n as g,o as C,p as X,q as m,r as $,s,t as a,u as F,x as E,y as h,z as u}from"./chunk-ZZD3BAGK.js";function Ie(i,l){if(i&1&&(s(0,"p"),c(1),a()),i&2){let n=l.$implicit;p(),A(n)}}function Fe(i,l){if(i&1&&(s(0,"div",13),C(1,Ie,2,1,"p",14),a()),i&2){let n=u();p(),m("ngForOf",n.errorMsg)}}var ge=(()=>{class i{router;authService;tokenService;authRequest={email:"",password:""};errorMsg=[];constructor(n,e,t){this.router=n,this.authService=e,this.tokenService=t}login(){this.errorMsg=[],this.authService.authenticate({body:this.authRequest}).subscribe({next:n=>{this.tokenService.token=n.token,this.router.navigate(["books"])},error:n=>{console.log(n),n.error.validationErrors?this.errorMsg=n.error.validationErrors:this.errorMsg.push(n.error.error)}})}register(){this.router.navigate(["register"])}static \u0275fac=function(e){return new(e||i)(g(O),g(R),g(D))};static \u0275cmp=_({type:i,selectors:[["app-login"]],decls:22,vars:3,consts:[[1,"container-fluid","card","login-container"],[1,"text-center"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"mb-3"],["for","login",1,"form-mabel"],["type","email","id","login","placeholder","name@example.com",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-mabel"],["type","password","id","password","placeholder","Password",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between","mb-3"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-sign-in-alt"],["type","button",1,"btn","btn-link",3,"click"],[1,"fas","fa-pencil"],["role","alert",1,"alert","alert-danger"],[4,"ngFor","ngForOf"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"h3",1),c(2,"Login"),a(),F(3,"hr"),C(4,Fe,2,1,"div",2),s(5,"div",3)(6,"label",4),c(7,"Email address"),a(),s(8,"input",5),M("ngModelChange",function(r){return w(t.authRequest.email,r)||(t.authRequest.email=r),r}),a()(),s(9,"div",3)(10,"label",6),c(11,"Password"),a(),s(12,"input",7),M("ngModelChange",function(r){return w(t.authRequest.password,r)||(t.authRequest.password=r),r}),a()(),s(13,"div",8)(14,"button",9),h("click",function(){return t.login()}),s(15,"em",10),c(16,"\xA0Sign in"),a()(),s(17,"div"),c(18," Don't have an account?\xA0 "),s(19,"button",11),h("click",function(){return t.register()}),s(20,"em",12),c(21,"\xA0Register"),a()()()()()),e&2&&(p(4),m("ngIf",t.errorMsg.length),p(4),x("ngModel",t.authRequest.email),p(4),x("ngModel",t.authRequest.password))},dependencies:[L,T,j,N,q]})}return i})();function Ee(i,l){if(i&1&&(s(0,"p"),c(1),a()),i&2){let n=l.$implicit;p(),A(n)}}function Ae(i,l){if(i&1&&(s(0,"div",17),C(1,Ee,2,1,"p",18),a()),i&2){let n=u();p(),m("ngForOf",n.errorMsg)}}var he=(()=>{class i{router;authService;constructor(n,e){this.router=n,this.authService=e}login(){this.router.navigate(["login"])}registerRequest={email:"",firstname:"",lastname:"",password:""};errorMsg=[];register(){this.errorMsg=[],this.authService.register({body:this.registerRequest}).subscribe({next:()=>{this.router.navigate(["activate-account"])},error:n=>{console.log(n),n.error.validationErrors&&(this.errorMsg=n.error.validationErrors)}})}static \u0275fac=function(e){return new(e||i)(g(O),g(R))};static \u0275cmp=_({type:i,selectors:[["app-register"]],decls:30,vars:5,consts:[[1,"container-fluid","card","login-container"],[1,"text-center"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"mb-3"],["for","email",1,"form-mabel"],["type","email","id","register","placeholder","name@example.com",1,"form-control",3,"ngModelChange","ngModel"],["for","firstname",1,"form-mabel"],["type","text","id","firstname","placeholder","first name",1,"form-control",3,"ngModelChange","ngModel"],["for","lastname",1,"form-mabel"],["type","text","id","lastname","placeholder","last name",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-mabel"],["type","password","id","password","placeholder","Password",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between","mb-3"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-pencil"],["type","button",1,"btn","btn-link",3,"click"],[1,"fas","fa-sign-in-alt"],["role","alert",1,"alert","alert-danger"],[4,"ngFor","ngForOf"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"h3",1),c(2,"Create an account"),a(),F(3,"hr"),C(4,Ae,2,1,"div",2),s(5,"div",3)(6,"label",4),c(7,"Email address"),a(),s(8,"input",5),M("ngModelChange",function(r){return w(t.registerRequest.email,r)||(t.registerRequest.email=r),r}),a()(),s(9,"div",3)(10,"label",6),c(11,"First name"),a(),s(12,"input",7),M("ngModelChange",function(r){return w(t.registerRequest.firstname,r)||(t.registerRequest.firstname=r),r}),a()(),s(13,"div",3)(14,"label",8),c(15,"Last name"),a(),s(16,"input",9),M("ngModelChange",function(r){return w(t.registerRequest.lastname,r)||(t.registerRequest.lastname=r),r}),a()(),s(17,"div",3)(18,"label",10),c(19,"Password"),a(),s(20,"input",11),M("ngModelChange",function(r){return w(t.registerRequest.password,r)||(t.registerRequest.password=r),r}),a()(),s(21,"div",12)(22,"button",13),h("click",function(){return t.register()}),s(23,"em",14),c(24,"\xA0register"),a()(),s(25,"div"),c(26," Already have an account?\xA0 "),s(27,"button",15),h("click",function(){return t.login()}),s(28,"em",16),c(29,"\xA0Sign in"),a()()()()()),e&2&&(p(4),m("ngIf",t.errorMsg.length),p(4),x("ngModel",t.registerRequest.email),p(4),x("ngModel",t.registerRequest.firstname),p(4),x("ngModel",t.registerRequest.lastname),p(4),x("ngModel",t.registerRequest.password))},dependencies:[L,T,j,N,q]})}return i})();var Le=["input"];function Te(i,l){if(i&1){let n=E();s(0,"span")(1,"input",2,0),h("click",function(t){v(n);let o=u();return y(o.onClick(t))})("paste",function(t){let o=v(n).index,r=u();return y(r.onPaste(t,o))})("input",function(t){let o=v(n).index,r=u();return y(r.onInput(t,o))})("keydown",function(t){let o=v(n).index,r=u();return y(r.onKeydown(t,o))}),a()()}if(i&2){let n=u();$("code-hidden",n.isCodeHidden),p(),m("type",n.inputType)("disabled",n.disabled),X("inputmode",n.inputMode)("autocapitalize",n.autocapitalize)}}var Ce=new Y("CodeInputComponentConfig"),fe={codeLength:4,inputType:"tel",inputMode:"numeric",initialFocusField:void 0,isCharsCode:!1,isCodeHidden:!1,isPrevFocusableAfterClearing:!0,isFocusingOnLastByClickIfFilled:!1,code:void 0,disabled:!1,autocapitalize:void 0},P=function(i){return i[i.ready=0]="ready",i[i.reset=1]="reset",i}(P||{}),_e=(()=>{let l=class l{constructor(e){if(this.isNonDigitsCode=!1,this.codeChanged=new B,this.codeCompleted=new B,this.placeholders=[],this.inputs=[],this.inputsStates=[],this.state={isFocusingAfterAppearingCompleted:!1,isInitialFocusFieldEnabled:!1},Object.assign(this,fe),!!e)for(let t in e)e.hasOwnProperty(t)&&fe.hasOwnProperty(t)&&(this[t]=e[t])}ngOnInit(){this.state.isInitialFocusFieldEnabled=!this.isEmpty(this.initialFocusField),this.onCodeLengthChanges()}ngAfterViewInit(){this.inputsListSubscription=this.inputsList.changes.subscribe(this.onInputsListChanges.bind(this)),this.onInputsListChanges(this.inputsList)}ngAfterViewChecked(){this.focusOnInputAfterAppearing()}ngOnChanges(e){e.code&&this.onInputCodeChanges(),e.codeLength&&this.onCodeLengthChanges()}ngOnDestroy(){this.inputsListSubscription&&this.inputsListSubscription.unsubscribe()}reset(e=!1){this.onInputCodeChanges(),this.state.isInitialFocusFieldEnabled&&this.focusOnField(this.initialFocusField),e&&this.emitChanges()}focusOnField(e){if(e>=this._codeLength)throw new Error("The index of the focusing input box should be less than the codeLength.");this.inputs[e].focus()}onClick(e){if(!this.isFocusingOnLastByClickIfFilled)return;let t=e.target,o=this.inputs[this._codeLength-1];t===o||!(this.getCurrentFilledCode().length>=this._codeLength)||setTimeout(()=>o.focus())}onInput(e,t){let o=e.target,r=e.data||o.value;if(this.isEmpty(r))return;if(!this.canInputValue(r)){e.preventDefault(),e.stopPropagation(),this.setInputValue(o,null),this.setStateForInput(o,P.reset);return}let d=r.toString().trim().split("");for(let f=0;f<d.length;f++){let V=f+t;if(V>this._codeLength-1)break;this.setInputValue(this.inputs[V],d[f])}this.emitChanges();let b=t+d.length;if(b>this._codeLength-1){o.blur();return}this.inputs[b].focus()}onPaste(e,t){e.preventDefault(),e.stopPropagation();let o=e.clipboardData?e.clipboardData.getData("text").trim():void 0;if(this.isEmpty(o))return;let r=o.split(""),d=0;for(let b=t;b<this.inputs.length&&d!==r.length;b++){let f=this.inputs[b],V=r[d];if(!this.canInputValue(V)){this.setInputValue(f,null),this.setStateForInput(f,P.reset);return}this.setInputValue(f,V.toString()),d++}this.inputs[t].blur(),this.emitChanges()}onKeydown(e,t){return Z(this,null,function*(){let o=e.target,r=this.isEmpty(o.value),d=t-1,b=yield this.isBackspaceKey(e),f=this.isDeleteKey(e);!b&&!f||(e.preventDefault(),this.setInputValue(o,null),r||this.emitChanges(),!(d<0||f)&&(r||this.isPrevFocusableAfterClearing)&&this.inputs[d].focus())})}onInputCodeChanges(){if(!this.inputs.length)return;if(this.isEmpty(this.code)){this.inputs.forEach(o=>{this.setInputValue(o,null)});return}let e=this.code.toString().trim().split(""),t=!0;for(let o of e)if(!this.canInputValue(o)){t=!1;break}this.inputs.forEach((o,r)=>{let d=t?e[r]:null;this.setInputValue(o,d)})}onCodeLengthChanges(){if(this.codeLength)if(this._codeLength=this.codeLength,this._codeLength>this.placeholders.length){let e=Array(this._codeLength-this.placeholders.length).fill(1);this.placeholders.splice(this.placeholders.length-1,0,...e)}else this._codeLength<this.placeholders.length&&this.placeholders.splice(this._codeLength)}onInputsListChanges(e){if(e.length>this.inputs.length){let t=e.filter((r,d)=>d>this.inputs.length-1);this.inputs.splice(this.inputs.length,0,...t.map(r=>r.nativeElement));let o=Array(t.length).fill(P.ready);this.inputsStates.splice(this.inputsStates.length,0,...o)}else e.length<this.inputs.length&&(this.inputs.splice(e.length),this.inputsStates.splice(e.length));this.onInputCodeChanges()}focusOnInputAfterAppearing(){this.state.isInitialFocusFieldEnabled&&(this.state.isFocusingAfterAppearingCompleted||(this.focusOnField(this.initialFocusField),this.state.isFocusingAfterAppearingCompleted=document.activeElement===this.inputs[this.initialFocusField]))}emitChanges(){setTimeout(()=>this.emitCode(),50)}emitCode(){let e=this.getCurrentFilledCode();this.codeChanged.emit(e),e.length>=this._codeLength&&this.codeCompleted.emit(e)}getCurrentFilledCode(){let e="";for(let t of this.inputs)this.isEmpty(t.value)||(e+=t.value);return e}isBackspaceKey(e){return e.key&&e.key.toLowerCase()==="backspace"||e.keyCode&&e.keyCode===8?Promise.resolve(!0):!e.keyCode||e.keyCode!==229?Promise.resolve(!1):new Promise(o=>{setTimeout(()=>{let r=e.target,d=this.getStateForInput(r)===P.reset;d&&this.setStateForInput(r,P.ready),o(r.selectionStart===0&&!d)})})}isDeleteKey(e){return e.key&&e.key.toLowerCase()==="delete"||e.keyCode&&e.keyCode===46}setInputValue(e,t){let o=this.isEmpty(t),r="has-value",d="empty";o?(e.value="",e.classList.remove(r),e.parentElement.classList.add(d)):(e.value=t,e.classList.add(r),e.parentElement.classList.remove(d))}canInputValue(e){return this.isEmpty(e)?!1:/^[0-9]+$/.test(e.toString())||this.isCharsCode||this.isNonDigitsCode}setStateForInput(e,t){let o=this.inputs.indexOf(e);o<0||(this.inputsStates[o]=t)}getStateForInput(e){let t=this.inputs.indexOf(e);return this.inputsStates[t]}isEmpty(e){return e==null||!e.toString().length}};l.\u0275fac=function(t){return new(t||l)(g(Ce,8))},l.\u0275cmp=_({type:l,selectors:[["code-input"]],viewQuery:function(t,o){if(t&1&&ee(Le,5),t&2){let r;te(r=ie())&&(o.inputsList=r)}},inputs:{codeLength:"codeLength",inputType:"inputType",inputMode:"inputMode",initialFocusField:"initialFocusField",isNonDigitsCode:"isNonDigitsCode",isCharsCode:"isCharsCode",isCodeHidden:"isCodeHidden",isPrevFocusableAfterClearing:"isPrevFocusableAfterClearing",isFocusingOnLastByClickIfFilled:"isFocusingOnLastByClickIfFilled",code:"code",disabled:"disabled",autocapitalize:"autocapitalize"},outputs:{codeChanged:"codeChanged",codeCompleted:"codeCompleted"},features:[U],decls:1,vars:1,consts:[["input",""],[3,"code-hidden",4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"click","paste","input","keydown","type","disabled"]],template:function(t,o){t&1&&C(0,Te,3,6,"span",1),t&2&&m("ngForOf",o.placeholders)},dependencies:[L],styles:["[_nghost-%COMP%]{--text-security-type: disc;--item-spacing: 4px;--item-height: 4.375em;--item-border: 1px solid #dddddd;--item-border-bottom: 1px solid #dddddd;--item-border-has-value: 1px solid #dddddd;--item-border-bottom-has-value: 1px solid #dddddd;--item-border-focused: 1px solid #dddddd;--item-border-bottom-focused: 1px solid #dddddd;--item-shadow-focused: 0px 1px 5px rgba(221, 221, 221, 1);--item-border-radius: 5px;--item-background: transparent;--item-font-weight: 300;--color: #171516;display:flex;transform:translateZ(0);font-size:inherit;color:var(--color)}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{display:block;flex:1;padding-right:var(--item-spacing)}[_nghost-%COMP%]   span[_ngcontent-%COMP%]:first-child{padding-left:var(--item-spacing)}[_nghost-%COMP%]   span.code-hidden[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-security:var(--text-security-type);-webkit-text-security:var(--text-security-type);-moz-text-security:var(--text-security-type)}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:var(--item-height);color:inherit;background:var(--item-background);text-align:center;font-size:inherit;font-weight:var(--item-font-weight);border:var(--item-border);border-bottom:var(--item-border-bottom);border-radius:var(--item-border-radius);-webkit-appearance:none;transform:translateZ(0);-webkit-transform:translate3d(0,0,0);outline:none}[_nghost-%COMP%]   input.has-value[_ngcontent-%COMP%]{border:var(--item-border-has-value);border-bottom:var(--item-border-bottom-has-value)}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{border:var(--item-border-focused);border-bottom:var(--item-border-bottom-focused);box-shadow:var(--item-shadow-focused)}"]});let i=l;return i})(),ve=(()=>{let l=class l{static forRoot(e){return{ngModule:l,providers:[{provide:Ce,useValue:e}]}}};l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=I({type:l}),l.\u0275inj=k({imports:[ne]});let i=l;return i})();function Re(i,l){if(i&1){let n=E();s(0,"div",5)(1,"h2"),c(2,"Activation successful"),a(),s(3,"p"),c(4,"your account has been successfully activated"),a(),s(5,"button",6),h("click",function(){v(n);let t=u(2);return y(t.redirectToLogin())}),c(6,"Go to Login"),a()()}}function Pe(i,l){if(i&1){let n=E();s(0,"div",7)(1,"h2"),c(2,"Activation failed"),a(),s(3,"p"),c(4),a(),s(5,"button",6),h("click",function(){v(n);let t=u(2);return y(t.submitted=!1)}),c(6,"Try again"),a()()}if(i&2){let n=u(2);p(4),A(n.message)}}function Ve(i,l){if(i&1&&(s(0,"div",3),C(1,Re,7,0,"div",4)(2,Pe,7,1,"ng-template",null,1,H),a()),i&2){let n=W(3),e=u();p(),m("ngIf",e.isOkay)("ngIfElse",n)}}function De(i,l){if(i&1){let n=E();s(0,"div",3)(1,"div",8)(2,"h2"),c(3,"Type your activation code"),a(),s(4,"code-input",9),h("codeCompleted",function(t){v(n);let o=u();return y(o.onCodeCompleted(t))}),a()()()}i&2&&(p(4),m("isCodeHidden",!1)("codeLength",6)("code","number"))}var ye=(()=>{class i{router;authService;message="";isOkay=!0;submitted=!1;constructor(n,e){this.router=n,this.authService=e}onCodeCompleted(n){this.confirmAccount(n)}confirmAccount(n){this.authService.confirm({token:n}).subscribe({next:()=>{this.message=`Your account has been successfully activated.
 Now you can proceed to login`,this.submitted=!0,this.isOkay=!0},error:()=>{this.message="Token has been expired or invalid",this.submitted=!0,this.isOkay=!1}})}redirectToLogin(){this.router.navigate(["login"])}static \u0275fac=function(e){return new(e||i)(g(O),g(R))};static \u0275cmp=_({type:i,selectors:[["app-activate-account"]],decls:3,vars:2,consts:[["codeForm",""],["activationError",""],["class","container",4,"ngIf","ngIfElse"],[1,"container"],["class","activate-message",4,"ngIf","ngIfElse"],[1,"activate-message"],[1,"btn","btn-primary",3,"click"],[1,"activate-error"],[1,"text-center",2,"width","400px"],[3,"codeCompleted","isCodeHidden","codeLength","code"]],template:function(e,t){if(e&1&&C(0,Ve,4,2,"div",2)(1,De,5,3,"ng-template",null,0,H),e&2){let o=W(2);m("ngIf",t.submitted)("ngIfElse",o)}},dependencies:[T,_e],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.activate-message[_ngcontent-%COMP%], .activate-error[_ngcontent-%COMP%]{text-align:center}.activate-error[_ngcontent-%COMP%]{color:red}"]})}return i})();var je=[{path:"login",component:ge},{path:"register",component:he},{path:"activate-account",component:ye},{path:"books",loadChildren:()=>import("./chunk-CSIR4EMH.js").then(i=>i.BookModule),canActivate:[ue]}],be=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=I({type:i});static \u0275inj=k({imports:[z.forRoot(je),z]})}return i})();var xe=(()=>{class i{title="book-network-ui";static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){e&1&&F(0,"router-outlet")},dependencies:[de]})}return i})();var we=(()=>{class i{tokenService;constructor(n){this.tokenService=n}intercept(n,e){let t=this.tokenService.token;if(t){let o=n.clone({headers:new oe({Authorization:"Bearer "+t})});return e.handle(o)}return e.handle(n)}static \u0275fac=function(e){return new(e||i)(J(D))};static \u0275prov=G({token:i,factory:i.\u0275fac})}return i})();var Me=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=I({type:i,bootstrap:[xe]});static \u0275inj=k({providers:[re,{provide:se,useClass:we,multi:!0}],imports:[ce,be,ae,pe,ve]})}return i})();le().bootstrapModule(Me,{ngZoneEventCoalescing:!0}).catch(i=>console.error(i));
